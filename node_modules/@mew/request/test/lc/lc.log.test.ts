import axios from "axios";
import {Lc} from '../../src/main'
import {LogInsertProperty} from "../../src/ms/lc";
const service = axios.create({
    baseURL: 'https://api.mew-iot.cn',
    // adapter: axiosAdapterUniapp as AxiosAdapter,
    timeout: 10000
})
const lc = Lc(service)

describe('log',()=>{
    const deviceId='052003001'

    let json:LogInsertProperty = {quantity: 1, isPutIn: false, status: false,uid:1, deviceId:deviceId}

    test('借还记录增加', async() => {
        const res = await lc.log.insert(json)
        // console.log(res)
        expect(res.code).toBe(0)
        expect(res.msg).toBe('success')
        expect(res.data[0].quantity).toBe(json.quantity)
        expect(res.data[0].isPutIn).toBe(json.isPutIn)
        expect(res.data[0].status).toBe(json.status)
        expect(res.data[0].uid).toBe(json.uid)
        expect(res.data[0].deviceId).toBe(json.deviceId)
    },2000)

    // test('借还记录修改', async() => {
    //     const res = await lc.log.update(json)
    //     console.log(res)
    //
    //     expect(res.code).toBe(0)
    //     expect(res.msg).toBe('success')
    //     expect(res.data[0].quantity).toBe(json.quantity)
    //     expect(res.data[0].isPutIn).toBe(json.isPutIn)
    //     expect(res.data[0].status).toBe(json.status)
    //     expect(res.data[0].uid).toBe(json.uid)
    //     expect(res.data[0].deviceId).toBe(json.deviceId)
    // },2000)

    test('借还记录删除', async() => {
        const res = await lc.log.delete(json)
        // console.log(res)
        expect(res.code).toBe(0)
        expect(res.msg).toBe('success')
        expect(res.data[0].quantity).toBe(json.quantity)
        expect(res.data[0].isPutIn).toBe(json.isPutIn)
        expect(res.data[0].status).toBe(json.status)
        expect(res.data[0].uid).toBe(json.uid)
        expect(res.data[0].deviceId).toBe(json.deviceId)
    },2000)

    // test('根据deviceId查询借还记录', async() => {
    //     const res = await lc.log.select({deviceId:deviceId})
    //     console.log(res)
    //     expect(res.data[0].deviceId).toBe(deviceId)
    // },2000)

})
