import axios from "axios";
import {Uc} from "../../src/ms/uc";
import {AuthData, Mc} from "../../src/ms/mc";
import {Tc} from "../../src/ms/tc";

// const baseURL = 'http://www.mew-iot.cn:51000'
const baseURL = 'https://api.mew-iot.cn'

let service = axios.create({
    baseURL ,
    // adapter: axiosAdapterUniapp as AxiosAdapter,
    timeout: 10000
})
let authData:AuthData
let uc

describe('user',()=>{
    beforeAll(async () => {
        const mc = Mc(service)
        const res = await mc.getAuth({username: 'admin', password: '111111'})
        authData = res.data
        const access_token = authData.access_token
        service = axios.create({
            baseURL,
            // adapter: axiosAdapterUniapp as AxiosAdapter,
            timeout: 10000,
            headers:{
                'Authorization': 'Bearer ' + access_token
            }
        })
        uc = Tc(service)
    })

    test(`确保user表包含username=admin`, async() => {
        const res= await uc.user.select({username:'admin'})
        // console.log(res.data)
    },2000)
    test(`确保user表包含username=李亮`, async() => {
        const res= await uc.user.select({username:'李亮'})
        console.log(res)
    },2000)
})
