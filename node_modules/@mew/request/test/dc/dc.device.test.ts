import axios from "axios";
import {AxiosEnv, Dc, Mc} from "../../src/main";
import {
    CabinetType, DeviceInsertProperty,
    DeviceMode,
    DeviceUpdateProperty, IoConf, IoModuleType,
    KeyBoard,
    MachineType, NetType, NqOption, PortType,
    ScreenType, SensorConf,
    SensorType, Terminal, TerminalBasicConfig,
    TerminalType, Version
} from "../../src/ms/dc";
import {AuthData} from "../../src/ms/mc";

// const baseURL = 'https://api.mew-iot.cn'
const baseURL = 'http://www.mew-iot.cn:51000'

let service = axios.create({
    baseURL ,
    // adapter: axiosAdapterUniapp as AxiosAdapter,
    timeout: 10000
})
let authData:AuthData
let dc

/**
 * 提供基础数据
 */
describe('device', () => {
    beforeEach(async () => {
        const mc = Mc(service)
        const res = await mc.getAuth({username: 'admin', password: '111111'})
        authData = res.data
        const access_token = authData.access_token
        service = axios.create({
            baseURL,
            // adapter: axiosAdapterUniapp as AxiosAdapter,
            timeout: 10000,
            headers:{
                'Authorization': 'Bearer ' + access_token
            }
        })
        dc = Dc(service)
    })

    const id='022111001',
        conf='{\"net\":1,\"version\":\"4.0\",\"address\":\"\",\"terminals\":[{\"tid\":0,\"ip\":\"192.168.8.100\",\"mode\":\"ck\",\"fun\":\"server\",\"type\":\"1313a000\",\"deviceId\":\"192202001\",\"mac\":\"\",\"uuid\":\"478ffba58b9d5f6c\",\"androidId\":\"478ffba58b9d5f6c\",\"arcfaceActiveCode\":\"\",\"machine\":\"1\",\"keyboard_show\":\"1\",\"checkLoginRight\":true,\"cardPasswordNeeded\":true,\"cards\":[{\"switch\":true,\"host\":\"192.168.8.7\",\"port\":23,\"station\":1,\"fun\":\"card\"}],\"fingers\":[{\"switch\":true,\"host\":\"192.168.8.8\",\"port\":20108,\"station\":1,\"fun\":\"finger\"}],\"gms\":[],\"rfids\":[],\"ioModules\":[],\"gpios\":[],\"charges\":[],\"ths\":[]}]}',
        conf1='{\"deviceId\":\"052111001\",\"deviceName\":\"宁德核电\",\"netType\":1,\"version\":3,\"address\":\"宁德\",\"terminals\":[{\"basicConfig\":{\"loginType\":{\"enableCard\":true,\"enableFace\":true,\"enableFinger\":true},\"terminalType\":3,\"cabinetType\":2,\"ip\":\"192.168.8.100\",\"mac\":\"00:a0:c9:14:ea:27\",\"androidId\":\"E5801E9517C05858\",\"screenType\":1,\"machineType\":1,\"sensorType\":4,\"keyBoard\":0,\"checkLoginRight\":true,\"cardPasswordNeeded\":false},\"deviceId\":\"052111001\",\"tid\":0,\"mac\":\"00:a0:c9:14:ea:27\",\"androidId\":\"\",\"androidOptions\":{},\"mode\":4,\"terminalType\":0,\"ioModules\":[{\"enable\":true,\"sensorType\":6,\"ioModuleType\":2,\"portType\":0,\"host\":\"192.168.8.75\",\"port\":502,\"station\":1},{\"enable\":true,\"sensorType\":6,\"ioModuleType\":2,\"portType\":0,\"host\":\"192.168.8.76\",\"port\":502,\"station\":1},{\"enable\":true,\"sensorType\":6,\"ioModuleType\":2,\"portType\":0,\"host\":\"192.168.8.77\",\"port\":502,\"station\":1}]}]}'

    test('device表删除id=022111002',async () => {
        const res = await dc.device.delete({id})
        expect(res.code).toBe(0)
        expect(res.msg).toBe('success')
        expect(res.data.length).toBeGreaterThanOrEqual(0)
    },2000)

    test('确保device表中包含id=022111001',async () => {
        const res =await dc.device.select({id})
        if (res.data.length == 0){
            const json:DeviceInsertProperty = {id, conf, companyId: 1, groupId: 1, name: "测试设备"}
            const res =await dc.device.insert(json)
            expect(res.code).toBe(0)
            expect(res.msg).toBe('success')
            expect(res.data.length).toBe(1)
            expect(res.data[0].id).toBe(json.id)
            expect(res.data[0].companyId).toBe(json.companyId)
            expect(res.data[0].groupId).toBe(json.groupId)
            expect(res.data[0].name).toBe(json.name)
            expect(res.data[0].conf).toBe(json.conf)
        }

    },2000)

    test('device表增加id=022111002',async () => {
        const res =await dc.device.insert({conf: conf1, companyId: 1, groupId: 1, name: "测试设备0", id: '022111002'})
        expect(res.code).toBe(0)
        expect(res.msg).toBe('success')
        expect(res.data.length).toBe(1)
        expect(res.data[0].id).toBe('022111002')
    },2000)

    const json = {companyId: 2, groupId: 2, name: "测试设备1", id: '022111002'}
    test('device表修改',async () => {
        const res = await dc.device.update(json)
        expect(res.code).toBe(0)
        expect(res.msg).toBe('success')
        expect(res.data.length).toBe(1)
        expect(res.data[0].id).toBe(json.id)
        expect(res.data[0].companyId).toBe(json.companyId)
        expect(res.data[0].groupId).toBe(json.groupId)
        expect(res.data[0].name).toBe(json.name)
    },2000)

    test('device表查询',async () => {
        const res = await dc.device.select({id: '022111002'})
        expect(res.code).toBe(0)
        expect(res.msg).toBe('success')
        expect(res.data.length).toBe(1)
        expect(res.data[0].id).toBe(json.id)
        expect(res.data[0].companyId).toBe(json.companyId)
        expect(res.data[0].groupId).toBe(json.groupId)
        expect(res.data[0].name).toBe(json.name)
    },2000)

    // test('J7 阿特拉斯视觉充电柜 atlas', async () => {
    //     const deviceId = '182011004'
    //     const basicConfig: TerminalBasicConfig = {
    //         loginType: {
    //             enableCard: true,
    //             enableFace: true,
    //             enableFinger: true
    //         },
    //         terminalType: TerminalType.readPlatform,
    //         cabinetType: CabinetType.ck,
    //         ip: '192.168.8.100',
    //         mac: '00:a0:c9:14:ea:27',
    //         androidId: 'E5801E9517C05858',
    //         screenType: ScreenType.android_21_5,
    //         machineType: MachineType.x64,
    //         sensorType: SensorType.charge,
    //         keyBoard: KeyBoard.default,
    //         checkLoginRight: true,
    //         cardPasswordNeeded: false
    //     }
    //     const ioModules: IoConf[] = [
    //         {
    //             enable: true,
    //             sensorType: SensorType.io,
    //             ioModuleType: IoModuleType.di,
    //             portType: PortType.net,
    //             host: '192.168.8.75',
    //             port: 502,
    //             station: 1
    //         },
    //         {
    //             enable: true,
    //             sensorType: SensorType.io,
    //             ioModuleType: IoModuleType.di,
    //             portType: PortType.net,
    //             host: '192.168.8.76',
    //             port: 502,
    //             station: 1
    //         }, {
    //             enable: true,
    //             sensorType: SensorType.io,
    //             ioModuleType: IoModuleType.di,
    //             portType: PortType.net,
    //             host: '192.168.8.77',
    //             port: 502,
    //             station: 1
    //         }, {
    //             enable: true,
    //             sensorType: SensorType.io,
    //             ioModuleType: IoModuleType.di,
    //             portType: PortType.net,
    //             host: '192.168.8.78',
    //             port: 502,
    //             station: 1
    //         }, {
    //             enable: true,
    //             sensorType: SensorType.io,
    //             ioModuleType: IoModuleType.di,
    //             portType: PortType.net,
    //             host: '192.168.8.79',
    //             port: 502,
    //             station: 1
    //         }, {
    //             enable: true,
    //             sensorType: SensorType.io,
    //             ioModuleType: IoModuleType.do,
    //             portType: PortType.net,
    //             host: '192.168.8.85',
    //             port: 502,
    //             station: 1
    //         }, {
    //             enable: true,
    //             sensorType: SensorType.io,
    //             ioModuleType: IoModuleType.do,
    //             portType: PortType.net,
    //             host: '192.168.8.86',
    //             port: 502,
    //             station: 1
    //         }, {
    //             enable: true,
    //             sensorType: SensorType.io,
    //             ioModuleType: IoModuleType.do,
    //             portType: PortType.net,
    //             host: '192.168.8.87',
    //             port: 502,
    //             station: 1
    //         }, {
    //             enable: true,
    //             sensorType: SensorType.io,
    //             ioModuleType: IoModuleType.do,
    //             portType: PortType.net,
    //             host: '192.168.8.88',
    //             port: 502,
    //             station: 1
    //         }, {
    //             enable: true,
    //             sensorType: SensorType.io,
    //             ioModuleType: IoModuleType.do,
    //             portType: PortType.net,
    //             host: '192.168.8.89',
    //             port: 502,
    //             station: 1
    //         }
    //     ]
    //     const conf = {
    //         basicConfig,
    //         deviceId: deviceId,
    //         tid: 0,
    //         mac: "00:a0:c9:14:ea:27",
    //         androidId: '',
    //         androidOptions: {
    //             headerImageUrl: 'images/header_images/top_bj_booher.png',
    //             cardImageUrl: 'images/card_images/card_booher.png',
    //             fingerImageUrl: undefined,
    //             faceImageUrl: undefined,
    //             logoImageUrl: undefined
    //         },
    //         mode: DeviceMode.ck,
    //         terminalType: TerminalType.readPlatform,
    //         ioModules: ioModules
    //     }
    //     const res = await dc.device.update({id: deviceId, conf: JSON.stringify(conf)})
    //     // console.log(res)
    //     expect(res.code).toBe(0)
    //     expect(res.msg).toBe('success')
    //     expect(res.data.length).toBe(1)
    //     expect(res.data[0].id).toBe(deviceId)
    //     expect(res.data[0].conf).toBe(JSON.stringify(conf))
    // }, 2000)
    //
    // test('智能仓库-常州', async () => {
    //     const deviceId = '052003001'
    //     const basicConfig: TerminalBasicConfig = {
    //         loginType: {
    //             enableCard: true,
    //             enableFace: true,
    //             enableFinger: true
    //         },
    //         terminalType: TerminalType.readPlatform,
    //         cabinetType: CabinetType.ck,
    //         ip: '192.168.8.100',
    //         mac: '00:a0:c9:14:ea:27',
    //         androidId: 'E5801E9517C05858',
    //         screenType: ScreenType.android_21_5,
    //         machineType: MachineType.x64,
    //         sensorType: SensorType.rfid,
    //         keyBoard: KeyBoard.default,
    //         checkLoginRight: true,
    //         cardPasswordNeeded: false
    //     }
    //     const conf = {
    //         deviceId: '052003001',
    //         deviceName: '深圳所智能仓库',
    //         netType: NetType.intranet,
    //         version: Version.v502,
    //         address: '深圳所',
    //         terminals: [getServer(), get97(), get98()]
    //     }
    //     const res = await dc.device.update({id: deviceId, conf: JSON.stringify(conf)})
    //     // console.log(res)
    //     expect(res.code).toBe(0)
    //     expect(res.msg).toBe('success')
    //     expect(res.data.length).toBe(1)
    //     expect(res.data[0].id).toBe(deviceId)
    //     expect(res.data[0].conf).toBe(JSON.stringify(conf))
    //
    //     /**
    //      * 服务器配置
    //      */
    //     function getServer(): Terminal {
    //         const basicConfig: TerminalBasicConfig = {
    //             loginType: {
    //                 enableCard: true,
    //                 enableFace: true,
    //                 enableFinger: true
    //             },
    //             terminalType: TerminalType.readPlatform,
    //             cabinetType: CabinetType.ck,
    //             ip: '192.168.8.100',
    //             mac: '00:a0:c9:14:ea:27',
    //             androidId: 'E5801E9517C05858',
    //             screenType: ScreenType.android_21_5,
    //             machineType: MachineType.x64,
    //             sensorType: SensorType.rfid,
    //             keyBoard: KeyBoard.default,
    //             checkLoginRight: true,
    //             cardPasswordNeeded: false
    //         }
    //
    //         return {
    //             basicConfig,
    //             deviceId: "052003001",
    //             tid: 0,
    //             mac: "00:a0:c9:14:ea:27",
    //             androidId: '',
    //             androidOptions: {
    //                 headerImageUrl: undefined,
    //                 cardImageUrl: undefined,
    //                 fingerImageUrl: undefined,
    //                 faceImageUrl: undefined,
    //                 logoImageUrl: undefined
    //             },
    //             mode: DeviceMode.ck,
    //             terminalType: TerminalType.readPlatform,
    //         }
    //     }
    //
    //     /**
    //      * 第一个子母门配置
    //      */
    //     function get97(): Terminal {
    //         const basicConfig: TerminalBasicConfig = {
    //             loginType: {
    //                 enableCard: true,
    //                 enableFace: true,
    //                 enableFinger: true
    //             },
    //             terminalType: TerminalType.readPlatform,
    //             cabinetType: CabinetType.ck,
    //             ip: '192.168.8.100',
    //             mac: '00:a0:c9:14:ea:27',
    //             androidId: 'E5801E9517C05858',
    //             screenType: ScreenType.android_21_5,
    //             machineType: MachineType.x64,
    //             sensorType: SensorType.rfid,
    //             keyBoard: KeyBoard.default,
    //             checkLoginRight: true,
    //             cardPasswordNeeded: false
    //         }
    //
    //         const nqOptionsIn: NqOption = {
    //             serialNo: 'E5801E9517C05858',
    //             host: '172.16.10.128',
    //             port: 8235
    //         }
    //         const nqOptionsOut: NqOption = {
    //             serialNo: 'B5941E95438E7258',
    //             host: '172.16.10.125',
    //             port: 8234
    //         }
    //         const ioModules: IoConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.dio,
    //                 portType: PortType.net,
    //                 host: '192.168.8.121',
    //                 port: 502,
    //                 station: 1
    //             }
    //         ]
    //         const rfidModule: SensorConf = {
    //             enable: true,
    //             sensorType: SensorType.finger,
    //             portType: PortType.net,
    //             host: '172.16.10.120',
    //             port: 4001,
    //             station: 1
    //         }
    //
    //         // ck
    //         return {
    //             basicConfig,
    //             deviceId: "052003001",
    //             tid: 3,
    //             mac: "",
    //             androidId: '',
    //             androidOptions: {
    //                 headerImageUrl: undefined,
    //                 cardImageUrl: undefined,
    //                 fingerImageUrl: undefined,
    //                 logoImageUrl: undefined,
    //                 faceImageUrl: undefined
    //             },
    //             mode: DeviceMode.ck,
    //             terminalType: TerminalType.readPlatform,
    //             nqOptions: [nqOptionsIn, nqOptionsOut],
    //             ioModules: ioModules,
    //             rfidModules: [rfidModule]
    //         }
    //     }
    //
    //     /**
    //      * 第二个子母门配置
    //      */
    //     function get98(): Terminal {
    //         const basicConfig: TerminalBasicConfig = {
    //             loginType: {
    //                 enableCard: true,
    //                 enableFace: true,
    //                 enableFinger: true
    //             },
    //             terminalType: TerminalType.readPlatform,
    //             cabinetType: CabinetType.ck,
    //             ip: '192.168.8.100',
    //             mac: '00:a0:c9:14:ea:27',
    //             androidId: 'E5801E9517C05858',
    //             screenType: ScreenType.android_21_5,
    //             machineType: MachineType.x64,
    //             sensorType: SensorType.rfid,
    //             keyBoard: KeyBoard.default,
    //             checkLoginRight: true,
    //             cardPasswordNeeded: false
    //         }
    //         const nqOptionsIn: NqOption = {
    //             serialNo: 'E5801E9517C05858',
    //             host: '172.16.10.35',
    //             port: 8235
    //         }
    //         const nqOptionsOut: NqOption = {
    //             serialNo: 'B5941E95438E7258',
    //             host: '172.16.10.36',
    //             port: 8234
    //         }
    //         const ioModules: IoConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.dio,
    //                 portType: PortType.net,
    //                 host: '192.168.8.33',
    //                 port: 502,
    //                 station: 1
    //             }
    //         ]
    //         const rfidModule: SensorConf = {
    //             enable: true,
    //             sensorType: SensorType.finger,
    //             portType: PortType.net,
    //             host: '172.16.10.32',
    //             port: 4001,
    //             station: 1
    //         }
    //
    //         // ck
    //         return {
    //             androidId: "",
    //             androidOptions: {
    //                 headerImageUrl: undefined,
    //                 cardImageUrl: undefined,
    //                 fingerImageUrl: undefined,
    //                 faceImageUrl: undefined,
    //                 logoImageUrl: undefined
    //             },
    //             basicConfig,
    //             deviceId: "052003001",
    //             tid: 3,
    //             mac: "",
    //             mode: DeviceMode.ck,
    //             terminalType: TerminalType.readPlatform,
    //             nqOptions: [nqOptionsIn, nqOptionsOut],
    //             ioModules: ioModules,
    //             rfidModules: [rfidModule]
    //         }
    //     }
    // }, 2000)
    //
    // test('J6一汽解放泛音充电柜', async () => {
    //     const deviceId = '182011004'
    //     const conf = {
    //         deviceId: deviceId,
    //         deviceName: 'J6一汽解放泛音充电柜',
    //         netType: NetType.intranet,
    //         version: Version.v502,
    //         address: 'J6一汽解放',
    //         terminals: [getTerminal()]
    //     }
    //     const res = await dc.device.update({id: deviceId, conf: JSON.stringify(conf)})
    //     // console.log(res)
    //     expect(res.code).toBe(0)
    //     expect(res.msg).toBe('success')
    //     expect(res.data.length).toBe(1)
    //     expect(res.data[0].id).toBe(deviceId)
    //     expect(res.data[0].conf).toBe(JSON.stringify(conf))
    //
    //     /**
    //      * 服务器配置
    //      */
    //     function getTerminal(): Terminal {
    //         const basicConfig: TerminalBasicConfig = {
    //             loginType: {
    //                 enableCard: true,
    //                 enableFace: true,
    //                 enableFinger: true
    //             },
    //             terminalType: TerminalType.readPlatform,
    //             cabinetType: CabinetType.ck,
    //             ip: '192.168.8.100',
    //             mac: '00:a0:c9:14:ea:27',
    //             androidId: 'E5801E9517C05858',
    //             screenType: ScreenType.android_21_5,
    //             machineType: MachineType.x64,
    //             sensorType: SensorType.charge,
    //             keyBoard: KeyBoard.default,
    //             checkLoginRight: true,
    //             cardPasswordNeeded: false
    //         }
    //
    //         const ioModules: IoConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.di,
    //                 portType: PortType.net,
    //                 host: '192.168.8.75',
    //                 port: 502,
    //                 station: 1
    //             },
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.di,
    //                 portType: PortType.net,
    //                 host: '192.168.8.76',
    //                 port: 502,
    //                 station: 1
    //             }, {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.di,
    //                 portType: PortType.net,
    //                 host: '192.168.8.77',
    //                 port: 502,
    //                 station: 1
    //             }, {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.di,
    //                 portType: PortType.net,
    //                 host: '192.168.8.78',
    //                 port: 502,
    //                 station: 1
    //             }, {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.di,
    //                 portType: PortType.net,
    //                 host: '192.168.8.79',
    //                 port: 502,
    //                 station: 1
    //             }, {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.do,
    //                 portType: PortType.net,
    //                 host: '192.168.8.85',
    //                 port: 502,
    //                 station: 1
    //             }, {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.do,
    //                 portType: PortType.net,
    //                 host: '192.168.8.86',
    //                 port: 502,
    //                 station: 1
    //             }, {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.do,
    //                 portType: PortType.net,
    //                 host: '192.168.8.87',
    //                 port: 502,
    //                 station: 1
    //             }, {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.do,
    //                 portType: PortType.net,
    //                 host: '192.168.8.88',
    //                 port: 502,
    //                 station: 1
    //             }, {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.do,
    //                 portType: PortType.net,
    //                 host: '192.168.8.89',
    //                 port: 502,
    //                 station: 1
    //             }
    //         ]
    //         // console.log(ioModules)
    //
    //         return {
    //             basicConfig,
    //             deviceId: deviceId,
    //             tid: 0,
    //             mac: "00:a0:c9:14:ea:27",
    //             androidId: '',
    //             androidOptions: {
    //                 headerImageUrl: "/images/header_images/top_bj_faw_atlas_charging_cabinet.png",
    //                 cardImageUrl: "/images/card_images/card.png",
    //                 fingerImageUrl: "/images/fingerprint_images/fingerprint.png",
    //                 logoImageUrl: "/images/logo_images/logo_booher.png",
    //                 faceImageUrl: "/images/face_images/face.png"
    //             },
    //             mode: DeviceMode.cd,
    //             terminalType: TerminalType.readPlatform,
    //             ioModules: ioModules
    //         }
    //     }
    // }, 2000)
    //
    // test('哈特充电柜', async () => {
    //     const deviceId = '182104002'
    //     const conf = {
    //         deviceId: deviceId,
    //         deviceName: '哈特充电柜',
    //         netType: NetType.intranet,
    //         version: Version.v502,
    //         address: '哈特充电柜',
    //         terminals: [getTerminal()]
    //     }
    //     const res = await dc.device.update({id: deviceId, conf: JSON.stringify(conf)})
    //     // console.log(res)
    //     expect(res.code).toBe(0)
    //     expect(res.msg).toBe('success')
    //     expect(res.data.length).toBe(1)
    //     expect(res.data[0].id).toBe(deviceId)
    //     expect(res.data[0].conf).toBe(JSON.stringify(conf))
    //
    //     /**
    //      * 服务器配置
    //      */
    //     function getTerminal(): Terminal {
    //         const basicConfig: TerminalBasicConfig = {
    //             loginType: {
    //                 enableCard: true,
    //                 enableFace: true,
    //                 enableFinger: true
    //             },
    //             terminalType: TerminalType.readPlatform,
    //             cabinetType: CabinetType.charger,
    //             ip: '192.168.8.100',
    //             mac: '',
    //             androidId: '',
    //             screenType: ScreenType.android_21_5,
    //             machineType: MachineType.x64,
    //             sensorType: SensorType.charge,
    //             keyBoard: KeyBoard.default,
    //             checkLoginRight: true,
    //             cardPasswordNeeded: false
    //         }
    //
    //         const cardModules: SensorConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.card,
    //                 portType: PortType.net,
    //                 host: '192.168.8.7',
    //                 port: 23,
    //                 station: 1
    //             }
    //         ]
    //
    //         const fingerModules: SensorConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.card,
    //                 portType: PortType.net,
    //                 host: '192.168.8.8',
    //                 port: 20108,
    //                 station: 1
    //             }
    //         ]
    //
    //         const ioModules: IoConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.di,
    //                 portType: PortType.net,
    //                 host: '192.168.8.75',
    //                 port: 502,
    //                 station: 1
    //             },
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.do,
    //                 portType: PortType.net,
    //                 host: '192.168.8.76',
    //                 port: 502,
    //                 station: 1
    //             }
    //         ]
    //
    //         return {
    //             basicConfig,
    //             deviceId: deviceId,
    //             tid: 0,
    //             mac: "",
    //             androidId: '8c3ea5de9c13e37d',
    //             androidOptions: {
    //                 headerImageUrl: "/images/header_images/top_bj_hardy.png",
    //                 cardImageUrl: "/images/card_images/card.png",
    //                 fingerImageUrl: "/images/fingerprint_images/fingerprint.png",
    //                 logoImageUrl: "/images/logo_images/logo_booher.png",
    //                 faceImageUrl: "/images/face_images/face.png"
    //             },
    //             mode: DeviceMode.cd,
    //             terminalType: TerminalType.readPlatform,
    //             ioModules: ioModules,
    //             cards: cardModules
    //         }
    //     }
    // }, 2000)
    //
    // test('金鹰广铁随车智能柜', async () => {
    //     const deviceId = '182104002'
    //     const conf = {
    //         deviceId: deviceId,
    //         deviceName: '广铁随车智能柜',
    //         netType: NetType.intranet,
    //         version: Version.v502,
    //         address: '广铁随车智能柜',
    //         terminals: [getTerminal()]
    //     }
    //     const res = await dc.device.update({id: deviceId, conf: JSON.stringify(conf)})
    //     // console.log(res)
    //     expect(res.code).toBe(0)
    //     expect(res.msg).toBe('success')
    //     expect(res.data.length).toBe(1)
    //     expect(res.data[0].id).toBe(deviceId)
    //     expect(res.data[0].conf).toBe(JSON.stringify(conf))
    //
    //     /**
    //      * 服务器配置
    //      */
    //     function getTerminal(): Terminal {
    //         const basicConfig: TerminalBasicConfig = {
    //             loginType: {
    //                 enableCard: true,
    //                 enableFace: true,
    //                 enableFinger: true
    //             },
    //             terminalType: TerminalType.readPlatform,
    //             cabinetType: CabinetType.charger,
    //             ip: '192.168.8.100',
    //             mac: '',
    //             androidId: '670c215d6f8f0f4',
    //             screenType: ScreenType.android_11_6,
    //             machineType: MachineType.x64,
    //             sensorType: SensorType.rfid,
    //             keyBoard: KeyBoard.default,
    //             checkLoginRight: true,
    //             cardPasswordNeeded: false
    //         }
    //
    //         const cardModules: SensorConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.card,
    //                 portType: PortType.net,
    //                 host: '192.168.8.7',
    //                 port: 23,
    //                 station: 1
    //             }
    //         ]
    //
    //         const fingerModules: SensorConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.card,
    //                 portType: PortType.net,
    //                 host: '192.168.8.8',
    //                 port: 20108,
    //                 station: 1
    //             }
    //         ]
    //
    //         const ioModules: IoConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.dio,
    //                 portType: PortType.net,
    //                 host: '192.168.8.75',
    //                 port: 502,
    //                 station: 1
    //             },
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.dio,
    //                 portType: PortType.net,
    //                 host: '192.168.8.76',
    //                 port: 502,
    //                 station: 1
    //             }
    //         ]
    //         // console.log(ioModules)
    //
    //         const rfidModule: SensorConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.finger,
    //                 portType: PortType.net,
    //                 host: '192.168.8.178',
    //                 port: 4001,
    //                 station: 1
    //             },
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.finger,
    //                 portType: PortType.net,
    //                 host: '192.168.8.179',
    //                 port: 4001,
    //                 station: 1
    //             }
    //         ]
    //
    //         return {
    //             basicConfig,
    //             deviceId: deviceId,
    //             tid: 0,
    //             mac: "",
    //             androidId: '670c215d6f8f0f4',
    //             androidOptions: {
    //                 headerImageUrl: "/images/header_images/top_bj_booher.png",
    //                 cardImageUrl: "/images/card_images/card.png",
    //                 fingerImageUrl: "/images/fingerprint_images/fingerprint.png",
    //                 logoImageUrl: "/images/logo_images/logo_booher.png",
    //                 faceImageUrl: "/images/face_images/face.png"
    //             },
    //             mode: DeviceMode.cd,
    //             terminalType: TerminalType.readPlatform,
    //             ioModules: ioModules,
    //             cards: cardModules,
    //             rfidModules: rfidModule
    //         }
    //     }
    // }, 2000)
    //
    // test('广西中腾机电200把钥匙柜', async () => {
    //     const deviceId = '042111009'
    //     const conf = {
    //         deviceId: deviceId,
    //         deviceName: '广西中腾机电200把钥匙柜',
    //         netType: NetType.intranet,
    //         version: Version.v502,
    //         address: '广西中腾机电200把钥匙柜',
    //         terminals: [getTerminal()]
    //     }
    //     const res = await dc.device.update({id: deviceId, conf: JSON.stringify(conf)})
    //     // console.log(res)
    //     expect(res.code).toBe(0)
    //     expect(res.msg).toBe('success')
    //     expect(res.data.length).toBe(1)
    //     expect(res.data[0].id).toBe(deviceId)
    //     expect(res.data[0].conf).toBe(JSON.stringify(conf))
    //
    //     /**
    //      * 服务器配置
    //      */
    //     function getTerminal(): Terminal {
    //         const basicConfig: TerminalBasicConfig = {
    //             loginType: {
    //                 enableCard: true,
    //                 enableFace: true,
    //                 enableFinger: true
    //             },
    //             terminalType: TerminalType.readPlatform,
    //             cabinetType: CabinetType.charger,
    //             ip: '192.168.8.100',
    //             mac: '',
    //             androidId: '934e30c67173aeab',
    //             screenType: ScreenType.android_11_6,
    //             machineType: MachineType.x64,
    //             sensorType: SensorType.rfid,
    //             keyBoard: KeyBoard.default,
    //             checkLoginRight: true,
    //             cardPasswordNeeded: false
    //         }
    //
    //         const cardModules: SensorConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.card,
    //                 portType: PortType.net,
    //                 host: '192.168.8.7',
    //                 port: 23,
    //                 station: 1
    //             }
    //         ]
    //
    //         const finger: SensorConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.card,
    //                 portType: PortType.net,
    //                 host: '192.168.8.8',
    //                 port: 20108,
    //                 station: 1
    //             }
    //         ]
    //
    //         const ioModules: IoConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.dio,
    //                 portType: PortType.net,
    //                 host: '192.168.8.75',
    //                 port: 502,
    //                 station: 1
    //             }
    //         ]
    //         // console.log(ioModules)
    //
    //         const rfidModule: SensorConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.finger,
    //                 portType: PortType.net,
    //                 host: '192.168.8.178',
    //                 port: 4001,
    //                 station: 1
    //             }
    //         ]
    //
    //         return {
    //             basicConfig,
    //             deviceId: deviceId,
    //             tid: 0,
    //             mac: "",
    //             androidId: '934e30c67173aeab',
    //             androidOptions: {
    //                 headerImageUrl: "/images/header_images/top_bj_booher.png",
    //                 cardImageUrl: "/images/card_images/card.png",
    //                 fingerImageUrl: "/images/fingerprint_images/fingerprint.png",
    //                 logoImageUrl: "/images/logo_images/logo_booher.png",
    //                 faceImageUrl: "/images/face_images/face.png"
    //             },
    //             mode: DeviceMode.cd,
    //             terminalType: TerminalType.readPlatform,
    //             ioModules: ioModules,
    //             cards: cardModules,
    //             rfidModules: rfidModule,
    //             fingers: finger
    //         }
    //     }
    // }, 2000)
    //
    // test('宁德核电-智能配发柜', async () => {
    //     const deviceId = '052111001'
    //     const conf = {
    //         deviceId,
    //         deviceName: '宁德核电',
    //         netType: NetType.intranet,
    //         version: Version.v502,
    //         address: '宁德',
    //         terminals: [getServer()]
    //     }
    //     const res = await dc.device.update({id: deviceId, conf: JSON.stringify(conf)})
    //     // console.log(res)
    //     expect(res.code).toBe(0)
    //     expect(res.msg).toBe('success')
    //     expect(res.data.length).toBe(1)
    //     expect(res.data[0].id).toBe(deviceId)
    //     expect(res.data[0].conf).toBe(JSON.stringify(conf))
    //
    //     /**
    //      * 服务器配置
    //      */
    //     function getServer(): Terminal {
    //         const basicConfig: TerminalBasicConfig = {
    //             loginType: {
    //                 enableCard: true,
    //                 enableFace: true,
    //                 enableFinger: true
    //             },
    //             terminalType: TerminalType.readPlatform,
    //             cabinetType: CabinetType.ck,
    //             ip: '192.168.8.100',
    //             mac: '00:a0:c9:14:ea:27',
    //             androidId: 'E5801E9517C05858',
    //             screenType: ScreenType.android_21_5,
    //             machineType: MachineType.x64,
    //             sensorType: SensorType.rfid,
    //             keyBoard: KeyBoard.default,
    //             checkLoginRight: true,
    //             cardPasswordNeeded: false
    //         }
    //
    //         const ioModules: IoConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.dio,
    //                 portType: PortType.net,
    //                 host: '192.168.8.75',
    //                 port: 502,
    //                 station: 1
    //             },
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.dio,
    //                 portType: PortType.net,
    //                 host: '192.168.8.76',
    //                 port: 502,
    //                 station: 1
    //             },
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.dio,
    //                 portType: PortType.net,
    //                 host: '192.168.8.77',
    //                 port: 502,
    //                 station: 1
    //             }
    //         ]
    //
    //         return {
    //             basicConfig,
    //             deviceId: "052111001",
    //             tid: 0,
    //             mac: "00:a0:c9:14:ea:27",
    //             androidId: '',
    //             androidOptions: {
    //                 headerImageUrl: undefined,
    //                 cardImageUrl: undefined,
    //                 fingerImageUrl: undefined,
    //                 faceImageUrl: undefined,
    //                 logoImageUrl: undefined
    //             },
    //             mode: DeviceMode.bjk,
    //             terminalType: TerminalType.server,
    //             ioModules
    //         }
    //     }
    // }, 2000)
    //
    // test('黔江12抽光敏柜', async () => {
    //     const deviceId = '022110006'
    //     const conf = {
    //         deviceId: deviceId,
    //         deviceName: '黔江12抽光敏柜',
    //         netType: NetType.intranet,
    //         version: Version.v502,
    //         address: '黔江12抽光敏柜',
    //         terminals: [getTerminal()]
    //     }
    //     const res = await dc.device.update({id: deviceId, conf: JSON.stringify(conf)})
    //     // console.log(res)
    //     expect(res.code).toBe(0)
    //     expect(res.msg).toBe('success')
    //     expect(res.data.length).toBe(1)
    //     expect(res.data[0].id).toBe(deviceId)
    //     expect(res.data[0].conf).toBe(JSON.stringify(conf))
    //
    //     /**
    //      * 服务器配置
    //      */
    //     function getTerminal(): Terminal {
    //         const basicConfig: TerminalBasicConfig = {
    //             loginType: {
    //                 enableCard: true,
    //                 enableFace: true,
    //                 enableFinger: true
    //             },
    //             terminalType: TerminalType.readPlatform,
    //             cabinetType: CabinetType.charger,
    //             ip: '192.168.8.100',
    //             mac: '',
    //             androidId: '',
    //             screenType: ScreenType.android_21_5,
    //             machineType: MachineType.x64,
    //             sensorType: SensorType.charge,
    //             keyBoard: KeyBoard.default,
    //             checkLoginRight: true,
    //             cardPasswordNeeded: false
    //         }
    //
    //         const cardModules: SensorConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.card,
    //                 portType: PortType.net,
    //                 host: '192.168.8.7',
    //                 port: 23,
    //                 station: 1
    //             }
    //         ]
    //
    //         const fingerModules: SensorConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.card,
    //                 portType: PortType.net,
    //                 host: '192.168.8.8',
    //                 port: 20108,
    //                 station: 1
    //             }
    //         ]
    //
    //         const ioModules: IoConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.di,
    //                 portType: PortType.net,
    //                 host: '192.168.8.75',
    //                 port: 502,
    //                 station: 1
    //             },
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.do,
    //                 portType: PortType.net,
    //                 host: '192.168.8.76',
    //                 port: 502,
    //                 station: 1
    //             }
    //         ]
    //
    //         return {
    //             basicConfig,
    //             deviceId: deviceId,
    //             tid: 0,
    //             mac: "",
    //             androidId: '8c3ea5de9c13e37d',
    //             androidOptions: {
    //                 headerImageUrl: "/images/header_images/top_bj_hardy.png",
    //                 cardImageUrl: "/images/card_images/card.png",
    //                 fingerImageUrl: "/images/fingerprint_images/fingerprint.png",
    //                 logoImageUrl: "/images/logo_images/logo_booher.png",
    //                 faceImageUrl: "/images/face_images/face.png"
    //             },
    //             mode: DeviceMode.cd,
    //             terminalType: TerminalType.readPlatform,
    //             ioModules: ioModules,
    //             cards: cardModules
    //         }
    //     }
    // }, 2000)
    //
    // test('衡阳特变拉杆箱', async () => {
    //     const deviceId = '072107001'
    //     const conf = {
    //         deviceId: deviceId,
    //         deviceName: '衡阳特变拉杆箱',
    //         netType: NetType.intranet,
    //         version: Version.v502,
    //         address: '衡阳特变拉杆箱',
    //         terminals: [getTerminal()]
    //     }
    //     const res = await dc.device.update({id: deviceId, conf: JSON.stringify(conf)})
    //     // console.log(res)
    //     expect(res.code).toBe(0)
    //     expect(res.msg).toBe('success')
    //     expect(res.data.length).toBe(1)
    //     expect(res.data[0].id).toBe(deviceId)
    //     expect(res.data[0].conf).toBe(JSON.stringify(conf))
    //
    //     /**
    //      * 服务器配置
    //      */
    //     function getTerminal(): Terminal {
    //         const basicConfig: TerminalBasicConfig = {
    //             loginType: {
    //                 enableCard: true,
    //                 enableFace: false,
    //                 enableFinger: false
    //             },
    //             terminalType: TerminalType.readPlatform,
    //             cabinetType: CabinetType.charger,
    //             ip: '192.168.8.100',
    //             mac: '00:a0:c9:14:ea:27',
    //             androidId: 'c64138dc87bd66c8',
    //             screenType: ScreenType.android_21_5,
    //             machineType: MachineType.x64,
    //             sensorType: SensorType.charge,
    //             keyBoard: KeyBoard.default,
    //             checkLoginRight: true,
    //             cardPasswordNeeded: false
    //         }
    //
    //         const ioModules: IoConf[] = [
    //             {
    //                 enable: true,
    //                 sensorType: SensorType.io,
    //                 ioModuleType: IoModuleType.di,
    //                 portType: PortType.net,
    //                 host: '192.168.8.75',
    //                 port: 502,
    //                 station: 1
    //             }
    //         ]
    //         // console.log(ioModules)
    //
    //         const rfidModule: SensorConf = {
    //             enable: true,
    //             sensorType: SensorType.finger,
    //             portType: PortType.net,
    //             host: '172.16.10.32',
    //             port: 4001,
    //             station: 1
    //         }
    //
    //         return {
    //             basicConfig,
    //             deviceId: deviceId,
    //             tid: 0,
    //             mac: "00:a0:c9:14:ea:27",
    //             androidId:'',
    //             androidOptions: {
    //                 headerImageUrl: "/images/header_images/top_bj_tbea_hengyang.png",
    //                 cardImageUrl: "/images/card_images/card.png",
    //                 fingerImageUrl: "/images/fingerprint_images/fingerprint.png",
    //                 logoImageUrl: "/images/logo_images/logo_booher.png",
    //                 faceImageUrl: "/images/face_images/face.png"
    //             },
    //             mode: DeviceMode.cd,
    //             terminalType: TerminalType.readPlatform,
    //             ioModules: ioModules,
    //             rfidModules: [rfidModule]
    //         }
    //     }
    // }, 2000)
})
