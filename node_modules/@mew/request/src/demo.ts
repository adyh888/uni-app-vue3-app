import {getAuth,Ac} from "./main";
import axios from 'axios'

const BaseURL = 'http://www.mew-iot.cn:51000'

let service = axios.create({
    baseURL: BaseURL,
    timeout: 10000
})

export const isDebugMode = true
export let ac = Ac(service, isDebugMode)

getAuth({username:'admin',password:'111111'},axios.create({baseURL:BaseURL })).then(res=>{
    console.log(res)
    console.assert(res.data.access_token && res.data.access_token!='','access_token必须存在！！！')
    service = axios.create({
        baseURL: BaseURL,
        timeout: 10000,
        // adapter: axiosAdapterUniapp as AxiosAdapter,
        headers:{
            'Authorization': 'Bearer ' + res.data.access_token
        }
    })
    ac = Ac(service, isDebugMode)
    console.log('done')
})
